!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-selection"],e):e(t.d3=t.d3||{},t.d3)}(this,function(t,e){"use strict";var n,o,r,i,d,u,a,c;n="undefined"==typeof SVGForeignObjectElement?"tspans":"foreignobject",o=function(t){var n;return n="function"==typeof t,"object"!=typeof t||t.nodeType?!!(t instanceof e.selection||t.nodeType||n)||(console.error("invalid bounds specified for text wrapping"),!1):!(!t.height||!t.width)||(console.error("text wrapping bounds must specify height and width"),!1)},r=function(t){var e,n,o,r;for(e=["height","width"],"function"==typeof t?n=t():t.nodeType?n=t.getBoundingClientRect():"object"==typeof t&&(n=t),o=Object.create(null),r=0;r<e.length;r++)o[e[r]]=n[e[r]];return o},i=function(t){var e;if("function"==typeof t?e=t():"number"==typeof t?e=t:void 0===t&&(e=0),"number"==typeof e)return e;console.error("padding could not be converted into a number")},d=function(t,e){return{height:t.height-2*e,width:t.width-2*e}},u=function(t,e){return d(r(t),i(e))},a={},a.foreignobject=function(t,n,o){var r,i,d,u;return r=t.text(),i=e.select(t.node().parentNode),t.remove(),d=i.append("foreignObject"),d.attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").attr("width",n.width).attr("height",n.height),"number"==typeof o&&d.attr("x",+t.attr("x")+o).attr("y",+t.attr("y")+o),u=d.append("xhtml:div"),u.style("height",n.height).style("width",n.width).html(r),u},a.tspans=function(t,e,n){var o,r,i,d,u;for(o=t.text().split(" ").reverse(),t.text(""),d=t.append("tspan"),d.attr("dx",0).attr("dy",0),i=0;o.length>0;)r=o.pop(),d.text(d.text()+" "+r),(d.node().getComputedTextLength()||0)>e.width&&(u=d.text().split(" ").slice(0,-1).join(" "),d.text(u),i=-1*d.node().getComputedTextLength(),d=t.append("tspan"),d.attr("dx",i).attr("dy","1em").text(r));"number"==typeof n&&t.attr("y",+t.attr("y")+n).attr("x",+t.attr("x")+n)},c=function(){var t,r,d;return t=function(t){t.each(function(){e.select(this).call(a[n],u(r,d),i(d))})},t.bounds=function(e){return e?o(e)?(r=e,t):(console.error("invalid text wrapping bounds"),!1):r},t.padding=function(e){return e?"number"==typeof e||"function"==typeof e?(d=e,t):(console.error("text wrap padding value must be either a number or a function"),!1):d},t.method=function(e){return e?(n=e,t):n},t};var p=c;t.selection=e.selection,t.select=e.select,t.textwrap=p,Object.defineProperty(t,"__esModule",{value:!0})});
